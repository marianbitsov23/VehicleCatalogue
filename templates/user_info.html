<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>User Info</title>
</head>
<body onload="start()">
    <div>
        <p>
            User : {{ user.username }} <br/>
            Email: {{ user.email }} <br/>
        </p>
        <a href="/sales_logged_in">Back</a>
        <br/>
    </div>
        <br/>
        <a href="/sales/user_sales">My sales</a> <br/>
        {% for message in get_flashed_messages() %}
            <p>{{ message }}</p>
        {% endfor %}
        <button onclick="eUsername()">Edit username</button>
        <button onclick="eEmail()">Edit email</button>
        <button onclick="ePassword()">Edit password</button>
        
        <script>
            function eUsername() {
                var u = document.getElementById("e-username");
                if (u.style.display === "none") {
                    u.style.display = "block";
                } else {
                    u.style.display = "none";
                }
            }
            function eEmail() {
                var e = document.getElementById("e-email");
                if (e.style.display === "none") {
                    e.style.display = "block";
                } else {
                    e.style.display = "none";
                }
            }
            function ePassword() {
                var p = document.getElementById("e-password");
                if (p.style.display === "none") {
                    p.style.display = "block";
                } else {
                    p.style.display = "none";
                }
            }
            function start(){
                eUsername();
                eEmail();
                ePassword();
            }
        </script>    
        
        <div id="e-username">
            <p>Edit your username</p>
            <form action="/edit_user_username" method="post">
                <input type="text" name="username" value="{{ user.username }}" placeholder="Enter your new username" required>
                <input type="password" name="oldpassword" placeholder="Enter your password" required>
                <button type="submit">Save</button>
            </form>
        </div>
        <div id="e-email">
            <p>Edit your email</p>
            <form action="/edit_user_email" method="post">
                <input type="text" name="email" value="{{ user.email }}" placeholder="Enter your new email" required>
                <input type="password" name="oldpassword" placeholder="Enter your password" required>
                <button type="submit">Save</button>
            </form>
        </div>
        <div id="e-password">
            <p>Edit your password</p>
            <form action="/edit_user_password" method="post">
                <input type="password" name="oldpassword" placeholder="Enter your old password" required>
                <input type="password" name="password" placeholder="Enter your new password" required>
                <input type="password" name="confirmpassword" placeholder="Confirm your new password" required>
                <button type="submit">Save</button>
            </form>
        </div>
    </div>
    <div>
        <form action="/log_out" method="POST">
            <input type="submit" value="log out">
        </form>
    </div>
</body>
</html>